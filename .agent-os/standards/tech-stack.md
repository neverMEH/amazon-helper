# Tech Stack

## Context

RecomAMP project tech stack configuration.

## Backend

- **Framework**: FastAPI (Python 3.11)
- **Database**: Supabase (PostgreSQL)
- **Authentication**: OAuth 2.0 (Amazon), JWT tokens
- **Encryption**: Fernet for token storage
- **HTTP Client**: httpx with tenacity for retries
- **Task Scheduling**: croniter
- **Background Services**: Token refresh, execution polling, schedule executor, collection executor
- **API Documentation**: OpenAPI/Swagger (auto-generated by FastAPI)
- **Testing**: pytest with coverage

## Frontend

- **Framework**: React 19.1.0
- **Language**: TypeScript 5.8.3
- **Build Tool**: Vite 5.4.12
- **Router**: React Router v7
- **State Management**: TanStack Query v5 (React Query)
- **CSS Framework**: Tailwind CSS 3.4.1
- **CSS Plugins**: @tailwindcss/forms, @tailwindcss/typography
- **UI Components**: Custom components (transitioning to shadcn/ui)
- **Code Editor**: Monaco Editor (@monaco-editor/react)
- **Charts**: Chart.js with react-chartjs-2
- **Icons**: Lucide React 0.534.0
- **Forms**: React Hook Form with Zod validation
- **Notifications**: react-hot-toast
- **Package Manager**: npm
- **Testing**: Vitest, Playwright (E2E), Testing Library

## TypeScript Configuration

- **Target**: ES2022
- **Module**: ESNext with bundler resolution
- **Strict Mode**: Enabled
- **verbatimModuleSyntax**: true (explicit type-only imports)
- **JSX**: react-jsx (modern transform)

## Development Tools

- **Linting**: ESLint 9 with TypeScript ESLint
- **Version Control**: Git
- **Development Command**: `./start_services.sh` (launches backend + frontend)

## Database

- **Provider**: Supabase
- **Type**: PostgreSQL
- **Features**: Built-in auth, RLS, real-time subscriptions
- **Key Tables**: users, amc_instances, amc_accounts, workflows, workflow_executions, workflow_schedules, schedule_runs, build_guides, report_data_collections, dashboards

## External Integrations

- **Amazon Marketing Cloud (AMC)**: API integration for workflow execution
- **Amazon Ads API**: OAuth authentication and token management

## Deployment

- **Current**: Development/local
- **Future Considerations**: Railway, Docker support prepared
- **Environment Variables**: .env file for configuration

## AI/ML (New - 2025-09-25)

- **Primary Provider**: Anthropic Claude (claude-3-5-sonnet-20241022)
- **Fallback Provider**: OpenAI GPT-4
- **Use Cases**:
  - Chart recommendations for AMC data
  - SQL query analysis and suggestions
  - Natural language to chart configuration
- **Configuration**: API keys in environment variables

## Upcoming Changes

- **UI Framework**: Migration to shadcn/ui planned
- **Components**: Will use radix-ui primitives
- **Utilities**: Adding clsx and tailwind-merge for className management
- **Variants**: class-variance-authority (cva) for component variants
